# é¡¹ç›®è¯´æ˜æ–‡æ¡£  [English](README.md) 

#### Webé¢„è§ˆ: https://robincarrollallen.github.io/capacitor-nuxt-app

## æŠ€æœ¯æ ˆæ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Nuxt 3 + Capacitor 6** çš„æ··åˆç§»åŠ¨åº”ç”¨æ¡†æ¶,æ”¯æŒ iOS/Android åŸç”Ÿå¼€å‘å’Œ Web éƒ¨ç½²ã€‚é¡¹ç›®é‡‡ç”¨ä¼ä¸šçº§æ¶æ„è®¾è®¡,å…·å¤‡å®Œæ•´çš„å¤šè¯­è¨€ã€å¤šä¸»é¢˜ã€çŠ¶æ€ç®¡ç†å’Œæ•°æ®æŒä¹…åŒ–èƒ½åŠ›,é€‚ç”¨äºæ¸¸æˆã€ç¤¾äº¤ã€é‡‘èç­‰å¤šç§Ÿæˆ·ç§»åŠ¨åº”ç”¨åœºæ™¯ã€‚

### 1. åŒ…ç®¡ç†å·¥å…·

- æ¨è`bun`åŒ…ç®¡ç†å™¨è¿›è¡Œä¾èµ–ç®¡ç†å’Œè„šæœ¬æ‰§è¡Œã€‚
- å¯ä»»é€‰ `npm`ã€`yarn`ã€`pnpm` ä¸»æµåŒ…ç®¡ç†å™¨è¿›è¡Œä¾èµ–ç®¡ç†å’Œè„šæœ¬æ‰§è¡Œã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **è·¨å¹³å°æ”¯æŒ**: Web + iOS + Android ç»Ÿä¸€å¼€å‘
- ğŸ¨ **å¤šä¸»é¢˜ç³»ç»Ÿ**: æ”¯æŒ 20+ é¢„å®šä¹‰ä¸»é¢˜,åŠ¨æ€åˆ‡æ¢
- ğŸŒ **å›½é™…åŒ–**: 7 ç§è¯­è¨€å¼€ç®±å³ç”¨
- ğŸ’¾ **å®Œå–„çš„æŒä¹…åŒ–**: IndexedDB + localStorage + Cookie å¤šå±‚å­˜å‚¨
- ğŸ“± **ç§»åŠ¨ç«¯ä¼˜åŒ–**: Vant UI + å“åº”å¼è®¾è®¡
- ğŸ” **ç±»å‹å®‰å…¨**: å…¨é¢çš„ TypeScript æ”¯æŒ
- âš¡ **é«˜æ€§èƒ½**: SSR/CSR å¯é€‰,è‡ªåŠ¨è·¯ç”±,ç»„ä»¶æ‡’åŠ è½½

### 2. æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Nuxt 3** | ^3.19.3 | å…¨æ ˆ Vue æ¡†æ¶,æ”¯æŒ SSR/SSG |
| **Vue 3** | ^3.5.22 | å“åº”å¼ç»„ä»¶å¼€å‘ |
| **Capacitor** | ^6.0.0 | è·¨å¹³å°åŸç”Ÿæ¡¥æ¥ |
| **Pinia** | ^3.0.3 | çŠ¶æ€ç®¡ç† |

### 3. UI ç»„ä»¶åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Vant** | ^4.9.21 | ç§»åŠ¨ç«¯ç»„ä»¶åº“ |
| **Tailwind CSS** | ^6.12.0 | åŸå­åŒ– CSS |
| **LESS** | ^4.4.2 | CSS é¢„å¤„ç†å™¨ |

### å·¥å…·åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **@nuxtjs/i18n** | ^10.1.0 | å›½é™…åŒ– |
| **dayjs** | ^1.11.18 | æ—¥æœŸå¤„ç† |
| **swiper** | ^12.0.2 | è½®æ’­ç»„ä»¶ |
| **DOMPurify** | ^3.3.0 | HTML æ¸…ç† |
| **clipboard-polyfill** | ^4.1.1 | å‰ªè´´æ¿ |
| **ua-parser-js** | ^2.0.6 | ç”¨æˆ·ä»£ç†è§£æ |


### å¼€å‘å·¥å…·

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **TypeScript** | ^5.4.5 | ç±»å‹ç³»ç»Ÿ |
| **ESLint** | ^9.4.0 | ä»£ç æ£€æŸ¥ |
| **@antfu/eslint-config** | ^2.20.0 | ESLint é…ç½® |

### 6. å…¶ä»–æŠ€æœ¯ä¸å·¥å…·

- **Micro App**ï¼šå¾®å‰ç«¯æ”¯æŒï¼ˆ`@micro-zoe/micro-app`ï¼‰ï¼Œä¾¿äºç³»ç»Ÿæ‹†åˆ†å’Œç‹¬ç«‹éƒ¨ç½²ã€‚

## ç›®å½•ç»“æ„ä¸ç”¨é€”

```
capacitor-nuxt-app/
â”œâ”€â”€ pages/                  # Nuxt è‡ªåŠ¨è·¯ç”± - åº”ç”¨é¡µé¢ (49 ä¸ªé¡µé¢)
â”‚   â”œâ”€â”€ (main)/            # ä¸»åº”ç”¨åˆ†ç»„ (åº•éƒ¨ Tabbar å¯¼èˆªåŒºåŸŸ)
â”‚   â”‚   â”œâ”€â”€ home/         # é¦–é¡µ - æ”¯æŒåŠ¨æ€ä¸»é¢˜å’Œå¤šç§æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ modules/  # é¦–é¡µå­æ¨¡å— (banner/jackpot/marquee/navBar/rank/sign ç­‰)
â”‚   â”‚   â”œâ”€â”€ profile/      # ä¸ªäººèµ„æ–™é¡µ
â”‚   â”‚   â”œâ”€â”€ activity/     # æ´»åŠ¨åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ deposit/      # å­˜æ¬¾é¡µ
â”‚   â”œâ”€â”€ activity/          # æ´»åŠ¨è¯¦æƒ…é¡µé¢
â”‚   â”‚   â”œâ”€â”€ invite/       # é‚€è¯·æ´»åŠ¨ (segments åˆ†æ®µ)
â”‚   â”‚   â”œâ”€â”€ Agency/       # ä»£ç†æ´»åŠ¨ (modules å­æ¨¡å—)
â”‚   â”‚   â””â”€â”€ share/        # åˆ†äº«æ´»åŠ¨
â”‚   â”œâ”€â”€ game/             # æ¸¸æˆç›¸å…³
â”‚   â”‚   â””â”€â”€ search/       # æ¸¸æˆæœç´¢
â”‚   â”œâ”€â”€ record/           # è®°å½•é¡µ
â”‚   â”œâ”€â”€ security/         # å®‰å…¨ç›¸å…³
â”‚   â””â”€â”€ withdraw/         # æç°ç›¸å…³
â”‚
â”œâ”€â”€ components/            # é€šç”¨å¯å¤ç”¨ç»„ä»¶ (16 ä¸ªç»„ä»¶)
â”‚   â”œâ”€â”€ AnimatedNumber/   # åŠ¨ç”»æ•°å­—æ˜¾ç¤º
â”‚   â”œâ”€â”€ Button/           # æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ CalendarPicker/   # æ—¥å†é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ DynamicLayout/    # åŠ¨æ€å¸ƒå±€
â”‚   â”œâ”€â”€ Flag/             # å›½æ——ç»„ä»¶
â”‚   â”œâ”€â”€ Icon/             # å›¾æ ‡ç»„ä»¶
â”‚   â”œâ”€â”€ Image/            # å›¾ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ Input/            # è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ Marquee/          # è·‘é©¬ç¯
â”‚   â”œâ”€â”€ NavigateBar/      # å¯¼èˆªæ¡
â”‚   â”œâ”€â”€ Navigation/       # å¯¼èˆªç»„ä»¶
â”‚   â”œâ”€â”€ PasswordInput/    # å¯†ç è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ RollList/         # æ»šåŠ¨åˆ—è¡¨
â”‚   â”œâ”€â”€ Select/           # é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ SliderTabs/       # æ»‘å—æ ‡ç­¾
â”‚   â””â”€â”€ VipTag/           # VIP æ ‡ç­¾
â”‚
â”œâ”€â”€ widgets/              # ä¸šåŠ¡ç‰¹å®šçš„å¤§å‹ç»„ä»¶ (10 ä¸ªåŠŸèƒ½æ¨¡å—)
â”‚   â”œâ”€â”€ gameCard/         # æ¸¸æˆå¡ç‰‡
â”‚   â”œâ”€â”€ gameWrap/         # æ¸¸æˆåŒ…è£…å™¨
â”‚   â”œâ”€â”€ iosPwaGuideSheet/ # iOS PWA å¼•å¯¼é¡µ
â”‚   â”œâ”€â”€ languageDialog/   # è¯­è¨€é€‰æ‹©å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ loginPopup/       # ç™»å½•å¼¹çª—
â”‚   â”œâ”€â”€ sidebar/          # ä¾§è¾¹æ  (å« banner å­æ¨¡å—)
â”‚   â”œâ”€â”€ svg/              # SVG ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ tabbar/           # åº•éƒ¨ Tabbar
â”‚   â”œâ”€â”€ verticalInfiniteScrollProps/ # å‚ç›´æ— é™æ»šåŠ¨
â”‚   â””â”€â”€ vipWrap/          # VIP åŒ…è£…å™¨
â”‚
â”œâ”€â”€ stores/               # Pinia çŠ¶æ€ç®¡ç† (12 ä¸ª Store)
â”‚   â”œâ”€â”€ user.ts           # ç”¨æˆ·ä¿¡æ¯ã€è®¤è¯ã€token
â”‚   â”œâ”€â”€ activity.ts       # æ´»åŠ¨ç›¸å…³æ•°æ®
â”‚   â”œâ”€â”€ app.ts            # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚   â”œâ”€â”€ agent.ts          # ä»£ç†å•†ä¿¡æ¯
â”‚   â”œâ”€â”€ device.ts         # è®¾å¤‡ä¿¡æ¯
â”‚   â”œâ”€â”€ game.ts           # æ¸¸æˆåˆ—è¡¨å’ŒçŠ¶æ€
â”‚   â”œâ”€â”€ layout.ts         # å¸ƒå±€çŠ¶æ€ (tabbar é«˜åº¦ç­‰)
â”‚   â”œâ”€â”€ status.ts         # åº”ç”¨çŠ¶æ€ (SSR, loading ç­‰)
â”‚   â”œâ”€â”€ system.ts         # ç³»ç»Ÿä¿¡æ¯
â”‚   â”œâ”€â”€ tenant.ts         # ç§Ÿæˆ·ä¿¡æ¯å’Œä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ vip.ts            # VIP ç›¸å…³
â”‚   â””â”€â”€ plugins/          # Store æ’ä»¶ (indexdb æŒä¹…åŒ–)
â”‚
â”œâ”€â”€ composables/          # Vue Composables - çŠ¶æ€é€»è¾‘å¤ç”¨
â”‚   â”œâ”€â”€ useAuth.ts        # è®¤è¯ç›¸å…³ hooks
â”‚   â”œâ”€â”€ useDevice.ts      # è®¾å¤‡ç›¸å…³ hooks
â”‚   â”œâ”€â”€ useLazyObserver.ts # æ‡’åŠ è½½è§‚å¯Ÿå™¨
â”‚   â”œâ”€â”€ message.ts        # æ¶ˆæ¯ hooks
â”‚   â””â”€â”€ options.ts        # é€‰é¡¹é…ç½® hooks
â”‚
â”œâ”€â”€ api/                  # API è¯·æ±‚å±‚
â”‚   â”œâ”€â”€ request.ts        # æ ¸å¿ƒ HTTP è¯·æ±‚å‡½æ•°
â”‚   â”œâ”€â”€ types.ts          # API ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ user/             # ç”¨æˆ·ç›¸å…³ API ç«¯ç‚¹
â”‚
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°åº“ (16 ä¸ªæ¨¡å—)
â”‚   â”œâ”€â”€ cache.ts          # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ dialog.ts         # å¯¹è¯æ¡†å¼¹çª—
â”‚   â”œâ”€â”€ event/            # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ format/           # æ ¼å¼åŒ–å·¥å…· (number/string)
â”‚   â”œâ”€â”€ language.ts       # è¯­è¨€ç›¸å…³
â”‚   â”œâ”€â”€ library.ts        # ç¬¬ä¸‰æ–¹åº“é›†æˆ
â”‚   â”œâ”€â”€ navigation.ts     # å¯¼èˆªè·³è½¬
â”‚   â”œâ”€â”€ purify.ts         # HTML æ¸…ç†
â”‚   â”œâ”€â”€ share.ts          # åˆ†äº«åŠŸèƒ½
â”‚   â”œâ”€â”€ time.ts           # æ—¶é—´å·¥å…·
â”‚   â”œâ”€â”€ util.ts           # é€šç”¨å·¥å…·
â”‚   â””â”€â”€ validate.ts       # éªŒè¯å‡½æ•°
â”‚
â”œâ”€â”€ enums/                # æšä¸¾å®šä¹‰ (13 ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ activity.ts       # æ´»åŠ¨ç±»å‹
â”‚   â”œâ”€â”€ country.ts        # å›½å®¶
â”‚   â”œâ”€â”€ currency.ts       # è´§å¸
â”‚   â”œâ”€â”€ device.ts         # è®¾å¤‡ç±»å‹
â”‚   â”œâ”€â”€ icon.ts           # å›¾æ ‡æšä¸¾
â”‚   â”œâ”€â”€ key.ts            # ç¼“å­˜é”®
â”‚   â”œâ”€â”€ language.ts       # è¯­è¨€
â”‚   â”œâ”€â”€ path.ts           # è·¯ç”±è·¯å¾„
â”‚   â”œâ”€â”€ regular.ts        # æ­£åˆ™è¡¨è¾¾å¼
â”‚   â”œâ”€â”€ time.ts           # æ—¶é—´æšä¸¾
â”‚   â””â”€â”€ index.ts          # å¯¼å‡ºå…¥å£
â”‚
â”œâ”€â”€ i18n/                 # å›½é™…åŒ–é…ç½®
â”‚   â”œâ”€â”€ config.ts         # i18n é…ç½®
â”‚   â”œâ”€â”€ libs/             # å›½é™…åŒ–åº“/ç»„ä»¶
â”‚   â”‚   â””â”€â”€ activity.ts   # æ´»åŠ¨åç§°å¤šè¯­è¨€åº“
â”‚   â””â”€â”€ locales/          # è¯­è¨€æ–‡ä»¶ (7 ç§è¯­è¨€)
â”‚       â”œâ”€â”€ en_US.json    # è‹±è¯­
â”‚       â”œâ”€â”€ zh_CN.json    # ä¸­æ–‡
â”‚       â”œâ”€â”€ pt_BR.json    # è‘¡è„ç‰™è¯­
â”‚       â”œâ”€â”€ id_ID.json    # å°å°¼è¯­
â”‚       â”œâ”€â”€ hi_IN.json    # å°åœ°è¯­
â”‚       â”œâ”€â”€ vi_VN.json    # è¶Šå—è¯­
â”‚       â””â”€â”€ en_PH.json    # è²å¾‹å®¾è‹±è¯­
â”‚
â”œâ”€â”€ theme/                # ä¸»é¢˜ç³»ç»Ÿ
â”‚   â”œâ”€â”€ index.ts          # ThemeManager ä¸»é¢˜ç®¡ç†å™¨
â”‚   â”œâ”€â”€ type.ts           # ä¸»é¢˜ç±»å‹å®šä¹‰ (20+ ä¸»é¢˜)
â”‚   â”œâ”€â”€ assets.ts         # èµ„æºé…ç½® (å›¾ç‰‡, å›¾æ ‡)
â”‚   â”œâ”€â”€ components.ts     # åŠ¨æ€ç»„ä»¶é…ç½®
â”‚   â”œâ”€â”€ sprite.ts         # Sprite é›ªç¢§å›¾
â”‚   â”œâ”€â”€ componentConfig/  # ç»„ä»¶é…ç½®é¢„è®¾
â”‚   â””â”€â”€ variables/        # CSS å˜é‡
â”‚       â”œâ”€â”€ color.ts      # é¢œè‰²å˜é‡
â”‚       â””â”€â”€ style_*.css   # å„ä¸»é¢˜ CSS å˜é‡æ–‡ä»¶
â”‚
â”œâ”€â”€ storage/              # å­˜å‚¨ç®¡ç†
â”‚   â””â”€â”€ indexdb/          # IndexedDB å®Œæ•´å°è£…
â”‚       â”œâ”€â”€ indexedDB.ts  # æ ¸å¿ƒç®¡ç†ç±»
â”‚       â”œâ”€â”€ useIndexedDB.ts # ç»„åˆå¼ API
â”‚       â””â”€â”€ useIndexedDBCleanup.ts # è¿‡æœŸæ•°æ®æ¸…ç†
â”‚
â”œâ”€â”€ plugins/              # Nuxt æ’ä»¶
â”‚   â”œâ”€â”€ app.client.ts     # åº”ç”¨åˆå§‹åŒ–
â”‚   â”œâ”€â”€ indexdb.client.ts # IndexedDB åˆå§‹åŒ–
â”‚   â”œâ”€â”€ pinia-indexdb.client.ts # Pinia + IndexedDB æ’ä»¶
â”‚   â””â”€â”€ site-info.global.ts # å…¨å±€ç«™ç‚¹ä¿¡æ¯
â”‚
â”œâ”€â”€ middleware/           # è·¯ç”±ä¸­é—´ä»¶
â”‚   â””â”€â”€ redirect.global.ts # å…¨å±€é‡å®šå‘
â”‚
â”œâ”€â”€ layouts/              # é¡µé¢å¸ƒå±€æ¨¡æ¿
â”œâ”€â”€ server/               # Nuxt Server API ç«¯ç‚¹
â”œâ”€â”€ types/                # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ global.d.ts       # å…¨å±€ç±»å‹
â”‚   â”œâ”€â”€ i18n.d.ts         # i18n ç±»å‹
â”‚   â””â”€â”€ vant.d.ts         # Vant ç»„ä»¶ç±»å‹
â”‚
â”œâ”€â”€ assets/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/              # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ global.css    # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ animate.css   # åŠ¨ç”»
â”‚   â”‚   â””â”€â”€ root.css      # CSS å˜é‡æ ¹å®šä¹‰
â”‚   â”œâ”€â”€ svg/              # SVG å›¾æ ‡ (æŒ‰åŠŸèƒ½åˆ†ç±»)
â”‚   â”‚   â”œâ”€â”€ tabbar/       # Tabbar å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ home/         # é¦–é¡µå›¾æ ‡
â”‚   â”‚   â””â”€â”€ sort/         # åˆ†ç±»å›¾æ ‡
â”‚   â””â”€â”€ icons/            # å…¶ä»–å›¾æ ‡èµ„æº
â”‚
â”œâ”€â”€ public/               # å…¬å¼€é™æ€èµ„æº
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ tenantInfo.json # ç§Ÿæˆ·é…ç½® (é»˜è®¤è¯­è¨€/ä¸»é¢˜)
â”‚
â”œâ”€â”€ ios/                  # iOS Capacitor é¡¹ç›®
â”œâ”€â”€ android/              # Android Capacitor é¡¹ç›®
â”œâ”€â”€ dist/                 # æ„å»ºè¾“å‡ºç›®å½•
â”‚
â”œâ”€â”€ nuxt.config.ts        # Nuxt æ ¸å¿ƒé…ç½®
â”œâ”€â”€ capacitor.config.ts   # Capacitor åŸç”Ÿé…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ eslint.config.mjs     # ESLint é…ç½®
â”œâ”€â”€ tailwind.config.ts    # Tailwind CSS é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–
```

#### 4. site-info.global.ts

**ç”¨é€”**: å…¨å±€ç«™ç‚¹ä¿¡æ¯å’Œä¸»é¢˜/è¯­è¨€åˆå§‹åŒ–

**åŠŸèƒ½**:
- ä» `tenantInfo.json` åŠ è½½ç§Ÿæˆ·é…ç½®
- æ¢å¤ç”¨æˆ·è¯­è¨€åå¥½ (Cookie â†’ ç§Ÿæˆ·é»˜è®¤ â†’ English)
- æ¢å¤ç”¨æˆ·ä¸»é¢˜åå¥½ (localStorage â†’ ç§Ÿæˆ·é»˜è®¤ â†’ STYLE_25)

**ä¼˜å…ˆçº§**:
```
è¯­è¨€: Cookie > tenantInfo.appDefaultLanguage > English
ä¸»é¢˜: localStorage > tenantInfo.skinTwoType > STYLE_25
```

### Vant æ’ä»¶

é€šè¿‡ `@vant/nuxt` è‡ªåŠ¨é›†æˆ:

```typescript
// nuxt.config.ts
modules: [
  '@vant/nuxt',
]
```

**åŠŸèƒ½**:
- è‡ªåŠ¨å¯¼å…¥ Vant ç»„ä»¶
- æŒ‰éœ€åŠ è½½,å‡å°åŒ…ä½“ç§¯
- æ”¯æŒ locale åˆ‡æ¢ (ä¸ i18n è”åŠ¨)

### i18n æ’ä»¶

é€šè¿‡ `@nuxtjs/i18n` è‡ªåŠ¨é›†æˆ:

```typescript
// nuxt.config.ts
i18n: {
  locales: [...],
  defaultLocale: 'en-US',
  strategy: 'no_prefix',
  detectBrowserLanguage: false,
}
```

**åŠŸèƒ½**:
- å¤šè¯­è¨€æ”¯æŒ
- è¯­è¨€åˆ‡æ¢
- ç¿»è¯‘æ–‡ä»¶æ‡’åŠ è½½

---

## å¤šè¯­è¨€å®ç°

### æŠ€æœ¯æ–¹æ¡ˆ

é‡‡ç”¨ **@nuxtjs/i18n + vue-i18n** çš„æ ‡å‡†ç»„åˆ:

```typescript
// nuxt.config.ts
i18n: {
  locales: [
    { code: 'en-US', name: 'English', iso: 'en-US', file: 'en_US.json' },
    { code: 'zh-CN', name: 'ä¸­æ–‡', iso: 'zh-CN', file: 'zh_CN.json' },
    // ... å…¶ä»–è¯­è¨€
  ],
  defaultLocale: 'en-US',
  strategy: 'no_prefix',              // ä¸ä½¿ç”¨ URL å‰ç¼€
  langDir: 'locales/',
  vueI18n: 'config.ts',
  detectBrowserLanguage: false,       // ç¦ç”¨æµè§ˆå™¨è¯­è¨€æ£€æµ‹
  compilation: {
    strictMessage: false,
    escapeHtml: true,                 // è½¬ä¹‰ HTML æ ‡ç­¾
  },
}
```

### æ”¯æŒçš„è¯­è¨€

| è¯­è¨€ä»£ç  | è¯­è¨€åç§° | æ–‡ä»¶å¤§å° |
|---------|---------|---------|
| en-US | English | 85 KB |
| zh-CN | ä¸­æ–‡ | 76.5 KB |
| pt-BR | PortuguÃªs | 91.7 KB |
| id-ID | Bahasa Indonesia | 89.5 KB |
| hi-IN | à¤¹à¤¿à¤‚à¤¦à¥€ | 153.7 KB |
| vi-VN | Tiáº¿ng Viá»‡t | 100 KB |
| en-PH | English (Philippines) | 0.3 KB |

### è¯­è¨€æ–‡ä»¶ç»“æ„

è¯­è¨€æ–‡ä»¶ä½äº [i18n/locales/](i18n/locales/),é‡‡ç”¨ JSON æ ¼å¼:

```json
// en_US.json
{
  "label": {
    "deposit": "Deposit",
    "language": "Language",
    "phonePlaceholder": "Phone"
  },
  "main": {
    "inicio": "Home",
    "promo": "Offers",
    "entrar": "Deposit",
    "suporte": "Support",
    "perfil": "Profile"
  },
  "11024": "No available channels."
}
```

### è¯­è¨€åˆ‡æ¢æœºåˆ¶

#### 1. çŠ¶æ€ç®¡ç†

è¯­è¨€çŠ¶æ€ç”± [stores/app.ts](stores/app.ts) ç®¡ç†:

```typescript
export const useAppStore = defineStore("app", () => {
  const locale = ref<LanguageType>(LanguageSupport[0])

  // è®¾ç½® Vant locale
  const setVantLocale = async () => {
    const pack = await import(`vant/es/locale/lang/${locale.value}.mjs`)
    Locale.use(locale.value, pack.default || pack)
  }

  // è®¾ç½®è¯­è¨€
  const setLocale = (language: string) => {
    const { $i18n } = useNuxtApp()
    const cookieLocale = useCookie("lang")

    locale.value = LanguageSupport.includes(language)
      ? language
      : LanguageSupport[0]

    setVantLocale()                   // æ›´æ–° Vant UI è¯­è¨€
    $i18n.setLocale(locale.value)    // æ›´æ–° vue-i18n è¯­è¨€
    cookieLocale.value = locale.value // æŒä¹…åŒ–åˆ° Cookie
  }

  return { locale, setLocale }
})
```

#### 2. åˆå§‹åŒ–æµç¨‹

```
1. åº”ç”¨å¯åŠ¨
   â†“
2. æ’ä»¶åŠ è½½ (site-info.global.ts)
   â†“
3. è¯»å–è¯­è¨€ä¼˜å…ˆçº§
   - Cookie "lang"
   - tenantInfo.appDefaultLanguage
   - é»˜è®¤ "en-US"
   â†“
4. è®¾ç½®è¯­è¨€
   - appStore.setLocale()
   - æ›´æ–° Vant locale
   - æ›´æ–° vue-i18n locale
```

#### 3. ç”¨æˆ·åˆ‡æ¢è¯­è¨€

é€šè¿‡ [widgets/languageDialog/](widgets/languageDialog/) ç»„ä»¶:

```vue
<template>
  <van-popup v-model:show="visible">
    <van-picker
      :columns="availableLanguages"
      @confirm="onConfirm"
    />
  </van-popup>
</template>

<script setup>
const appStore = useAppStore()

const onConfirm = (language) => {
  appStore.setLocale(language.code) // åˆ‡æ¢è¯­è¨€å¹¶æŒä¹…åŒ–
}
</script>
```

### æŒä¹…åŒ–æœºåˆ¶

**Cookie å­˜å‚¨**:
- Cookie åç§°: `lang`
- æœ‰æ•ˆæœŸ: ä¼šè¯çº§åˆ« (é»˜è®¤)
- ä½œç”¨åŸŸ: å…¨å±€

**åˆå§‹åŒ–æ¢å¤**:
```typescript
// plugins/site-info.global.ts
const cookieLocale = useCookie("lang")
appStore.setLocale(
  cookieLocale.value ||                        // ä¼˜å…ˆä½¿ç”¨ Cookie
  siteInfo.value?.appDefaultLanguage ||        // å…¶æ¬¡ä½¿ç”¨ç§Ÿæˆ·é…ç½®
  LANGUAGE_REVERSE.English                      // æœ€åä½¿ç”¨é»˜è®¤è¯­è¨€
)
```

### ä½¿ç”¨ç¤ºä¾‹

#### åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨

```vue
<template>
  <!-- ç®€å•ç¿»è¯‘ -->
  <h1>{{ $t('label.deposit') }}</h1>

  <!-- åŠ¨æ€è·¯å¾„ -->
  <span>{{ $t(`main.${item.label}`) }}</span>

  <!-- å¸¦å‚æ•° -->
  <p>{{ $t('message.welcome', { name: userName }) }}</p>
</template>
```

#### åœ¨è„šæœ¬ä¸­ä½¿ç”¨

```typescript
<script setup>
const { $i18n } = useNuxtApp()

// è·å–ç¿»è¯‘
const text = $i18n.t('label.deposit')

// åˆ‡æ¢è¯­è¨€
$i18n.setLocale('zh-CN')

// è·å–å½“å‰è¯­è¨€
const currentLocale = $i18n.locale.value
</script>
```

#### ä¸šåŠ¡æ´»åŠ¨åç§°

ä½¿ç”¨ä¸“ç”¨çš„æ´»åŠ¨åç§°åº“ [i18n/libs/activity.ts](i18n/libs/activity.ts):

```typescript
import { getRechargeActivityName } from "@/i18n/libs/activity"

const activityName = getRechargeActivityName(
  'zh-CN',  // è¯­è¨€
  'DAILY',  // resetType
  'FIRST'   // rechargeType
)
```

---

## ä¸»é¢˜é…ç½®

### ä¸»é¢˜ç®¡ç†å™¨

ä¸»é¢˜ç³»ç»Ÿç”± [theme/index.ts](theme/index.ts) ä¸­çš„ `ThemeManager` ç±»ç®¡ç†ã€‚

#### ThemeManager API

```typescript
class ThemeManager {
  // è®¾ç½®ä¸»é¢˜
  async setTheme(theme: ThemeType, isInit?: boolean): Promise<void>

  // é¢„åŠ è½½ä¸»é¢˜ (ä¼˜åŒ–æ€§èƒ½)
  async preloadTheme(theme: ThemeType): Promise<void>

  // é¢„åŠ è½½æ‰€æœ‰ä¸»é¢˜
  async preloadAllThemes(): Promise<void>

  // è·å–å½“å‰ä¸»é¢˜
  getCurrentTheme(): ThemeType
}

// å…¨å±€å®ä¾‹
export const themeManager = new ThemeManager()
```

### æ”¯æŒçš„ä¸»é¢˜

é¡¹ç›®æ”¯æŒ **20+ é¢„å®šä¹‰ä¸»é¢˜**,å®šä¹‰åœ¨ [theme/type.ts](theme/type.ts):

```typescript
export const THEME_TYPE = {
  STYLE_1: "style_1",
  STYLE_2: "style_2",
  // ...
  STYLE_18: "style_18",
  STYLE_25: "style_25",
  // ... æœ€å¤š STYLE_50
} as const
```

**å¸¸ç”¨ä¸»é¢˜**:
- `STYLE_18`: ç»å…¸ä¸»é¢˜
- `STYLE_25`: é»˜è®¤ä¸»é¢˜ (é¡¹ç›®é»˜è®¤å€¼)

### ä¸»é¢˜å˜é‡ç³»ç»Ÿ

æ¯ä¸ªä¸»é¢˜éƒ½æœ‰ç‹¬ç«‹çš„ CSS å˜é‡æ–‡ä»¶:

```
theme/variables/
â”œâ”€â”€ style_1.css
â”œâ”€â”€ style_2.css
â”œâ”€â”€ style_18.css
â”œâ”€â”€ style_25.css
â””â”€â”€ ...
```

#### å˜é‡åˆ†ç±»

ä¸»é¢˜å®šä¹‰äº† **400+ ä¸ª CSS å˜é‡**,æ¶µç›–:

**1. è‰²å½©ç³»ç»Ÿ (120+ å˜é‡)**

```css
/* style_25.css */
:root[data-theme="style_25"] {
  /* é‡ç‚¹è‰² */
  --theme-color-primary: #ff6b00;
  --theme-color-secondary: #4caf50;
  --theme-color-accent: #2196f3;

  /* é€æ˜åº¦å˜ä½“ */
  --theme-color-primary-light-10: rgba(255, 107, 0, 0.1);
  --theme-color-primary-light-20: rgba(255, 107, 0, 0.2);

  /* è‰²ç³»æ¢¯åº¦ */
  --theme-color-orange-1: #fff7e6;
  --theme-color-orange-5: #ff6b00;
  --theme-color-orange-9: #b34a00;

  /* ä¸­æ€§ç°åº¦ */
  --theme-color-gray-1: #f5f5f5;
  --theme-color-gray-9: #1a1a1a;
}
```

**2. å°ºå¯¸ç³»ç»Ÿ (20+ å˜é‡)**

```css
--theme-space-xs: 4px;
--theme-space-sm: 8px;
--theme-space-md: 16px;
--theme-space-lg: 24px;
--theme-space-xl: 32px;
```

**3. æ’ç‰ˆç³»ç»Ÿ (10+ å˜é‡)**

```css
--theme-font-family: "Roboto", sans-serif;
--theme-font-size-xs: 12px;
--theme-font-size-sm: 14px;
--theme-font-size-md: 16px;
--theme-font-weight-normal: 400;
--theme-font-weight-bold: 700;
```

**4. ç©ºé—´ç³»ç»Ÿ (20+ å˜é‡)**

```css
--theme-radius-sm: 4px;
--theme-radius-md: 8px;
--theme-radius-lg: 12px;
--theme-shadow-sm: 0 2px 4px rgba(0,0,0,0.1);
--theme-shadow-md: 0 4px 8px rgba(0,0,0,0.15);
```

**5. åº”ç”¨å˜é‡ (80+ å˜é‡)**

```css
/* èƒŒæ™¯è‰² */
--theme-bg-primary: #ffffff;
--theme-bg-secondary: #f5f5f5;
--theme-bg-tertiary: #e0e0e0;

/* è¾¹æ¡†è‰² */
--theme-border-color: #e0e0e0;
--theme-border-color-light: #f0f0f0;

/* æ–‡æœ¬è‰² */
--theme-text-primary: #333333;
--theme-text-secondary: #666666;
--theme-text-disabled: #999999;

/* å›¾æ ‡è‰² */
--theme-icon-color: #666666;
--theme-icon-color-active: #ff6b00;
```

### ç»„ä»¶é…ç½®

é™¤äº† CSS å˜é‡,éƒ¨åˆ†ä¸»é¢˜è¿˜æ”¯æŒç»„ä»¶çº§é…ç½®:

```typescript
// theme/componentConfig/style_25.ts
export const style_25Config = {
  banner: {
    autoplay: true,
    interval: 3000,
    showIndicators: true,
  },
  button: {
    borderRadius: '8px',
    primaryColor: '#ff6b00',
  },
}
```

### ä¸»é¢˜åˆ‡æ¢æµç¨‹

```
1. ç”¨æˆ·é€‰æ‹©ä¸»é¢˜
   â†“
2. themeManager.setTheme(theme)
   â†“
3. åŠ¨æ€å¯¼å…¥ä¸»é¢˜ CSS æ–‡ä»¶
   - import(`/theme/variables/${theme}.css`)
   â†“
4. åº”ç”¨ä¸»é¢˜åˆ° DOM
   - document.documentElement.setAttribute('data-theme', theme)
   â†“
5. æŒä¹…åŒ–åˆ° localStorage
   - localStorage.setItem('theme', theme)
   â†“
6. æ›´æ–°ç»„ä»¶é…ç½® (å¦‚éœ€è¦)
```

### ä½¿ç”¨ç¤ºä¾‹

#### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜å˜é‡

```vue
<template>
  <div class="custom-box">
    <button class="primary-btn">ç‚¹å‡»æˆ‘</button>
  </div>
</template>

<style scoped>
.custom-box {
  background-color: var(--theme-bg-primary);
  border: 1px solid var(--theme-border-color);
  border-radius: var(--theme-radius-md);
  padding: var(--theme-space-md);
}

.primary-btn {
  background-color: var(--theme-color-primary);
  color: var(--theme-text-inverse);
  border-radius: var(--theme-radius-sm);
  padding: var(--theme-space-sm) var(--theme-space-md);
}

.primary-btn:hover {
  background-color: var(--theme-color-primary-dark);
}
</style>
```

#### åˆ‡æ¢ä¸»é¢˜

```typescript
<script setup>
import { themeManager, THEME_TYPE } from '@/theme'

// åˆ‡æ¢åˆ° STYLE_18
const switchTheme = () => {
  themeManager.setTheme(THEME_TYPE.STYLE_18)
}

// è·å–å½“å‰ä¸»é¢˜
const currentTheme = themeManager.getCurrentTheme()
</script>
```

---

## å¤šçš®è‚¤å®ç°

### å®ç°åŸç†

å¤šçš®è‚¤ç³»ç»Ÿé‡‡ç”¨ **CSS å˜é‡ + åŠ¨æ€å¯¼å…¥** æ–¹æ¡ˆ:

1. **CSS å˜é‡**: ä½¿ç”¨ `data-theme` å±æ€§é€‰æ‹©å™¨éš”ç¦»æ ·å¼
2. **åŠ¨æ€å¯¼å…¥**: æŒ‰éœ€æ‡’åŠ è½½ä¸»é¢˜ CSS æ–‡ä»¶
3. **ç»„ä»¶çº§æ ·å¼**: æ”¯æŒæ¯ä¸ªä¸»é¢˜çš„ä¸“å±ç»„ä»¶æ ·å¼

### æ ¸å¿ƒæœºåˆ¶

#### 1. ä¸»é¢˜ CSS æ‡’åŠ è½½

```typescript
// theme/index.ts
class ThemeManager {
  private loadedThemes = new Set<ThemeType>()

  private async loadThemeCSS(theme: ThemeType): Promise<boolean> {
    if (this.loadedThemes.has(theme)) {
      return true // å·²åŠ è½½,ç›´æ¥è¿”å›
    }

    try {
      // åŠ¨æ€å¯¼å…¥ä¸»é¢˜ CSS
      await import(`./variables/${theme}.css`)
      this.loadedThemes.add(theme)
      return true
    } catch (error) {
      console.error(`Failed to load theme: ${theme}`, error)
      return false
    }
  }
}
```

#### 2. DOM å±æ€§åˆ‡æ¢

```typescript
private applyTheme(theme: ThemeType): void {
  document.documentElement.setAttribute('data-theme', theme)
}
```

#### 3. æ ·å¼éš”ç¦»

```css
/* theme/variables/style_25.css */
:root[data-theme="style_25"] {
  --theme-color-primary: #ff6b00;
  --theme-bg-primary: #ffffff;
}

/* theme/variables/style_18.css */
:root[data-theme="style_18"] {
  --theme-color-primary: #4caf50;
  --theme-bg-primary: #f5f5f5;
}
```

### ç»„ä»¶çº§å¤šçš®è‚¤

éƒ¨åˆ†ç»„ä»¶æ”¯æŒä¸»é¢˜ä¸“å±æ ·å¼æ–‡ä»¶:

```
pages/(main)/home/modules/banner/
â”œâ”€â”€ style_18/
â”‚   â”œâ”€â”€ index.vue
â”‚   â””â”€â”€ index.less
â”œâ”€â”€ style_25/
â”‚   â”œâ”€â”€ index.vue
â”‚   â””â”€â”€ index.less
â””â”€â”€ index.vue  (æ ¹æ®ä¸»é¢˜åŠ¨æ€åŠ è½½å¯¹åº”ç‰ˆæœ¬)
```

**åŠ¨æ€ç»„ä»¶åŠ è½½**:

```vue
<!-- pages/(main)/home/index.vue -->
<template>
  <component :is="BannerComponent" />
</template>

<script setup>
const tenantStore = useTenantStore()
const theme = computed(() => tenantStore.theme)

const BannerComponent = computed(() => {
  // æ ¹æ®ä¸»é¢˜åŠ è½½å¯¹åº”ç»„ä»¶
  return defineAsyncComponent(() =>
    import(`./modules/banner/${theme.value}/index.vue`)
  )
})
</script>
```

### é¢„åŠ è½½ä¼˜åŒ–

ä¸ºé¿å…ä¸»é¢˜åˆ‡æ¢æ—¶çš„é—ªçƒ,æ”¯æŒé¢„åŠ è½½:

```typescript
// é¢„åŠ è½½å•ä¸ªä¸»é¢˜
await themeManager.preloadTheme(THEME_TYPE.STYLE_18)

// é¢„åŠ è½½æ‰€æœ‰ä¸»é¢˜ (é¦–é¡µç©ºé—²æ—¶)
await themeManager.preloadAllThemes()
```

### ä¸»é¢˜æŒä¹…åŒ–

ä½¿ç”¨ **localStorage** æŒä¹…åŒ–ç”¨æˆ·é€‰æ‹©:

```typescript
// theme/index.ts
async setTheme(theme: ThemeType, isInit = false): Promise<void> {
  const success = await this.loadThemeCSS(theme)

  if (success) {
    this.currentTheme = theme
    this.applyTheme(theme)

    if (!isInit) {
      // ä»…ç”¨æˆ·ä¸»åŠ¨åˆ‡æ¢æ—¶æ‰ä¿å­˜
      localStorage.setItem("theme", theme)
    }
  }
}
```

### ç§Ÿæˆ·é…ç½®

æ”¯æŒé€šè¿‡ [public/data/tenantInfo.json](public/data/tenantInfo.json) é…ç½®ç§Ÿæˆ·é»˜è®¤ä¸»é¢˜:

```json
{
  "skinTwoType": "style_25",
  "appDefaultLanguage": "en-US"
}
```

### å®Œæ•´åˆ‡æ¢æµç¨‹

```
ç”¨æˆ·è§¦å‘åˆ‡æ¢
   â†“
themeManager.setTheme(newTheme)
   â†“
æ£€æŸ¥ä¸»é¢˜æ˜¯å¦å·²åŠ è½½
   â”œâ”€ å·²åŠ è½½ â†’ ç›´æ¥åº”ç”¨
   â””â”€ æœªåŠ è½½ â†’ åŠ¨æ€ import CSS
       â†“
   æˆåŠŸåŠ è½½ â†’ æ·»åŠ åˆ° loadedThemes
       â†“
åº”ç”¨åˆ° DOM
   - setAttribute('data-theme', newTheme)
       â†“
æŒä¹…åŒ–
   - localStorage.setItem('theme', newTheme)
       â†“
æ›´æ–° Pinia çŠ¶æ€
   - tenantStore.theme = newTheme
       â†“
ç»„ä»¶å“åº”å¼æ›´æ–°
   - åŠ¨æ€ç»„ä»¶é‡æ–°åŠ è½½
   - CSS å˜é‡è‡ªåŠ¨ç”Ÿæ•ˆ
```

---

## ç¼“å­˜åŠæŒä¹…åŒ–å°è£…

é¡¹ç›®é‡‡ç”¨ **å¤šå±‚æ¬¡ã€åˆ†çº§åˆ«** çš„å­˜å‚¨æ–¹æ¡ˆ,æ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚ã€‚

### å­˜å‚¨æ–¹æ¡ˆæ€»è§ˆ

| å­˜å‚¨ç±»å‹ | åº”ç”¨åœºæ™¯ | å®ç°ä½ç½® | ç‰¹ç‚¹ |
|---------|--------|--------|-----|
| **IndexedDB** | çŠ¶æ€æŒä¹…åŒ–ã€æ•°æ®ç¼“å­˜ | [storage/indexdb/](storage/indexdb/) | æ”¯æŒè¿‡æœŸæ—¶é—´ã€è‡ªåŠ¨æ¸…ç† |
| **localStorage** | ä¸»é¢˜ã€è¯­è¨€ã€é…ç½® | [theme/index.ts](theme/index.ts) | æŒä¹…åŒ–å…³é”®é…ç½® |
| **Cookie** | ç”¨æˆ·è®¤è¯ã€è¯­è¨€åå¥½ | [stores/user.ts](stores/user.ts) | æ”¯æŒè‡ªåŠ¨è¿‡æœŸã€è·¨åŸŸé…ç½® |
| **å†…å­˜ç¼“å­˜** | è¿è¡Œæ—¶ä¸´æ—¶æ•°æ® | [utils/cache.ts](utils/cache.ts) | åˆ†ç±»ç®¡ç†ã€å¿«é€ŸæŸ¥è¯¢ |
| **Pinia State** | åº”ç”¨çŠ¶æ€ | [stores/](stores/) | å“åº”å¼ã€è‡ªåŠ¨æ¨å¯¼ |

---

### 1. IndexedDB å®Œæ•´å°è£…

ä½äº [storage/indexdb/](storage/indexdb/),æä¾›ä¼ä¸šçº§ IndexedDB ç®¡ç†ã€‚

#### æ ¸å¿ƒæ–‡ä»¶

**a) indexedDB.ts - æ ¸å¿ƒç®¡ç†ç±»**

```typescript
class IndexedDBManager {
  // æ•°æ®åº“é…ç½®
  dbName: string
  version: number
  storeName: string

  // æ ¸å¿ƒæ–¹æ³•
  async set<T>(key: string, value: T, expiresIn?: number): Promise<void>
  async get<T>(key: string): Promise<T | null>
  async delete(key: string): Promise<void>
  async clear(): Promise<void>
  async keys(): Promise<string[]>
  async has(key: string): Promise<boolean>
  async size(): Promise<number>
  async cleanup(): Promise<void> // æ¸…ç†è¿‡æœŸæ•°æ®
  close(): void
}
```

**å­˜å‚¨ç»“æ„**:
```typescript
interface StorageItem<T = any> {
  value: T                    // å®é™…å­˜å‚¨çš„å€¼
  timestamp: number           // å­˜å‚¨æ—¶é—´æˆ³
  expiresAt?: number         // è¿‡æœŸæ—¶é—´æˆ³ (å¯é€‰)
}
```

**b) useIndexedDB.ts - ç»„åˆå¼ API**

```typescript
export function useIndexedDB(config?: IndexedDBConfig) {
  const set = async <T>(key: string, value: T, expiresIn?: number)
  const get = async <T>(key: string): Promise<T | null>
  const remove = async (key: string)
  const clear = async ()
  const keys = async (): Promise<string[]>
  const has = async (key: string): Promise<boolean>
  const size = async (): Promise<number>
  const cleanup = async ()
  const close = ()

  return { set, get, remove, clear, keys, has, size, cleanup, close }
}
```

**c) useIndexedDBCleanup.ts - è¿‡æœŸæ•°æ®æ¸…ç†**

```typescript
export function useIndexedDBCleanup() {
  const startCleanup = ()  // å¯åŠ¨æ¸…ç†å®šæ—¶å™¨ (æ¯å°æ—¶)
  const stopCleanup = ()   // åœæ­¢æ¸…ç†å®šæ—¶å™¨
  const manualCleanup = () // æ‰‹åŠ¨æ¸…ç†

  return { startCleanup, stopCleanup, manualCleanup }
}
```

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
<script setup>
import { useIndexedDB } from '@/storage/indexdb'

const { set, get, remove } = useIndexedDB()

// ä¿å­˜æ•°æ® (1 å°æ—¶åè¿‡æœŸ)
await set('user:profile', userData, 60 * 60 * 1000)

// è¯»å–æ•°æ®
const profile = await get('user:profile')

// åˆ é™¤æ•°æ®
await remove('user:profile')
</script>
```

---

### 2. å†…å­˜ç¼“å­˜å·¥å…·

ä½äº [utils/cache.ts](utils/cache.ts),æä¾›é«˜æ€§èƒ½çš„åˆ†ç±»å‹å†…å­˜ç¼“å­˜ã€‚

#### API æ¥å£

```typescript
// åŸºç¡€æ“ä½œ
export function setCache<T>(type: string, key: string, value: T): void
export function getCache<T>(type: string, key: string): T | undefined
export function getOrSetCache<T>(
  type: string,
  key: string,
  factory: () => T
): T

// æ‰¹é‡æ“ä½œ
export function getCacheKeysByType(type: string): string[]
export function getCacheValuesByType<T>(type: string): T[]
export function getCacheEntriesByType<T>(type: string): Array<[string, T]>

// ç®¡ç†åŠŸèƒ½
export function hasCache(type: string, key: string): boolean
export function deleteCache(type: string, key: string): boolean
export function deleteCacheByType(type: string): boolean
export function clearCacheByType(type: string): void
export function clearCache(): void

// ç»Ÿè®¡ä¿¡æ¯
export function getCacheStats(): {
  totalTypes: number
  totalItems: number
  types: Record<string, number>
}
```

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { setCache, getCache, getOrSetCache } from '@/utils/cache'

// ç¼“å­˜ç”¨æˆ·æ•°æ®
setCache('user', 'profile', userProfile)

// è¯»å–ç¼“å­˜
const profile = getCache('user', 'profile')

// æ‡’åŠ è½½ç¼“å­˜ (ä¸å­˜åœ¨æ—¶æ‰åˆ›å»º)
const config = getOrSetCache('app', 'config', () => ({
  theme: 'style_25',
  language: 'en-US',
}))

// æ¸…ç†ç‰¹å®šç±»å‹ç¼“å­˜
clearCacheByType('user')
```

---

### 3. Pinia çŠ¶æ€æŒä¹…åŒ–

#### Pinia IndexedDB æ’ä»¶

ä½äº [stores/plugins/indexdb.ts](stores/plugins/indexdb.ts),è‡ªåŠ¨æŒä¹…åŒ– Pinia çŠ¶æ€ã€‚

**å·¥ä½œåŸç†**:

```typescript
export function piniaIndexedDBPlugin({ store }: PiniaPluginContext) {
  const config = store.$indexedDB || {}
  const excludeSet = new Set(config.exclude || [])
  const { get, set } = useIndexedDB()
  const key = `pinia-${store.$id}`

  // 1. åˆå§‹åŒ–æ—¶æ¢å¤çŠ¶æ€
  get(key).then((data) => {
    if (data) {
      store.$patch(data)
    }
  })

  // 2. è‡ªåŠ¨æŒä¹…åŒ–çŠ¶æ€å˜åŒ–
  store.$subscribe((_mutation, state) => {
    const stateToCache = {}

    for (const key in state) {
      // æ’é™¤è§„åˆ™:
      // - ç§æœ‰å±æ€§ (_å¼€å¤´)
      // - $indexedDB.exclude é…ç½®çš„å±æ€§
      if (Object.hasOwn(state, key)
        && !key.startsWith("_")
        && !excludeSet.has(key)) {
        stateToCache[key] = state[key]
      }
    }

    set(key, stateToCache)
  })
}
```

**åœ¨ Store ä¸­é…ç½®**:

```typescript
// stores/status.ts
export const useStatusStore = defineStore("status", () => {
  // é…ç½®ä¸æŒä¹…åŒ–çš„å­—æ®µ
  const $indexedDB = {
    exclude: [
      "mainLeftDrawerVisible",  // UI çŠ¶æ€ä¸æŒä¹…åŒ–
      "loginPopupVisible",      // å¼¹çª—çŠ¶æ€ä¸æŒä¹…åŒ–
    ],
  }

  // éœ€è¦æŒä¹…åŒ–çš„çŠ¶æ€
  const iosPwaGuideSheetVisible = ref(false)
  const loginPopupType = ref(0)

  return {
    $indexedDB,
    iosPwaGuideSheetVisible,
    loginPopupType,
  }
})
```

---

### 4. Cookie æŒä¹…åŒ–

#### ç”¨æˆ·è®¤è¯ Token

```typescript
// stores/user.ts
const token = useCookie("token", {
  default: () => "",
  secure: false,      // Web ç¯å¢ƒä¸éœ€è¦ HTTPS
  sameSite: "lax",    // å…è®¸ç¬¬ä¸‰æ–¹ GET è¯·æ±‚å‘é€
  maxAge: 60 * 60 * 24 * 7, // 7 å¤©è¿‡æœŸ
})
```

#### è¯­è¨€åå¥½

```typescript
// stores/app.ts
const cookieLocale = useCookie("lang")

const setLocale = (language: string) => {
  locale.value = language
  cookieLocale.value = language // æŒä¹…åŒ–
}
```

---

### 5. å®Œæ•´çš„æ•°æ®æŒä¹…åŒ–æµç¨‹

```
æ•°æ®æº
  â†“
Pinia Store (å†…å­˜)
  â†“
  â”œâ†’ piniaIndexedDBPlugin ç›‘å¬å˜åŒ–
  â”‚   â†“
  â”‚   IndexedDB å­˜å‚¨ (æŒä¹…åŒ–)
  â”‚
  â”œâ†’ Cookie å­˜å‚¨ (è®¤è¯ä»¤ç‰Œã€è¯­è¨€)
  â”‚
  â”œâ†’ localStorage å­˜å‚¨ (ä¸»é¢˜ã€é…ç½®)
  â”‚
  â””â†’ å†…å­˜ç¼“å­˜ (è¿è¡Œæ—¶ä¸´æ—¶æ•°æ®)

åº”ç”¨é‡å¯
  â†“
  â”œâ†’ IndexedDB æ¢å¤ Pinia çŠ¶æ€
  â”‚
  â”œâ†’ Cookie è‡ªåŠ¨æ¢å¤
  â”‚
  â”œâ†’ localStorage æ¢å¤ä¸»é¢˜
  â”‚
  â””â†’ åº”ç”¨å°±ç»ª
```

---

### 6. è¿‡æœŸæ—¶é—´é…ç½®

å®šä¹‰åœ¨ [enums/time.ts](enums/time.ts):

```typescript
export const EXPIRATION_TIME = {
  MINUTE: 60 * 1000,                    // 60 ç§’
  HOUR: 60 * 60 * 1000,                 // 1 å°æ—¶
  DAY: 24 * 60 * 60 * 1000,             // 24 å°æ—¶
  WEEK: 7 * 24 * 60 * 60 * 1000,        // 7 å¤©
  MONTH: 30 * 24 * 60 * 60 * 1000,      // 30 å¤©
} as const
```

**ä½¿ç”¨ç¤ºä¾‹**:

```typescript
import { EXPIRATION_TIME } from '@/enums/time'

// ä¿å­˜æ•°æ®,1 å¤©åè¿‡æœŸ
await set("cache:data", data, EXPIRATION_TIME.DAY)
```

---

### 7. ä¸»è¦ç‰¹æ€§

| ç‰¹æ€§ | å®ç° | è¯´æ˜ |
|-----|-----|------|
| **è¿‡æœŸæ—¶é—´ç®¡ç†** | IndexedDB | æ”¯æŒç§’ã€æ—¶ã€å¤©ã€å‘¨ã€æœˆçº§åˆ« |
| **è‡ªåŠ¨æ¸…ç†** | useIndexedDBCleanup | æ¯å°æ—¶è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ® |
| **é€‰æ‹©æ€§æŒä¹…åŒ–** | piniaIndexedDBPlugin | `$indexedDB.exclude` é…ç½® |
| **ç§æœ‰å±æ€§ä¿æŠ¤** | piniaIndexedDBPlugin | ä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§ä¸æŒä¹…åŒ– |
| **åˆ†ç±»ç¼“å­˜** | cache.ts | æŒ‰ç±»å‹åˆ†ç±»ç®¡ç†å†…å­˜ç¼“å­˜ |
| **æ‡’åŠ è½½** | getOrSetCache | ä¸å­˜åœ¨æ—¶æ‰åˆ›å»º |
| **ç±»å‹å®‰å…¨** | æ‰€æœ‰æ¨¡å— | ä½¿ç”¨ TypeScript æ³›å‹ |
| **äº‹åŠ¡ç®¡ç†** | IndexedDB | ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ |
| **è‡ªåŠ¨æ¢å¤** | å„ plugin | åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤ |

---

## å¯åŠ¨ä¸æ„å»º

### å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
# æˆ–
bun install
```

### å¼€å‘æ¨¡å¼

#### Web å¼€å‘

```bash
# CSR (å®¢æˆ·ç«¯æ¸²æŸ“)
npm run dev:csr

# SSR (æœåŠ¡ç«¯æ¸²æŸ“)
npm run dev
npm run dev:ssr
```
# nuxt.config.ts é…ç½® devServer è®¾ç½®å¼€å‘æœåŠ¡å™¨
å¼€å‘æœåŠ¡å™¨å¯åŠ¨åœ¨ `http://0.0.0.0:4000`

#### iOS å¼€å‘

```bash
# ä»…è¿è¡Œ (éœ€è¦å…ˆ build)
npm run ios

# æ„å»º + åŒæ­¥ + è¿è¡Œ (æ¨è)
npm run ios:sync
```

**è¦æ±‚**:
- macOS
- Xcode å·²å®‰è£…
- iOS æ¨¡æ‹Ÿå™¨æˆ–çœŸæœº

#### Android å¼€å‘

```bash
# ä»…è¿è¡Œ (éœ€è¦å…ˆ build)
npm run android

# æ„å»º + åŒæ­¥ + è¿è¡Œ (æ¨è)
npm run android:sync
```

**è¦æ±‚**:
- Android Studio å·²å®‰è£…
- Android SDK å·²é…ç½®
- Android æ¨¡æ‹Ÿå™¨æˆ–çœŸæœº

### ç”Ÿäº§æ„å»º

```bash
# Web æ„å»º (CSR)
npm run build

# Web æ„å»º (SSR)
npm run build:ssr

# Web æ„å»º + Capacitor åŒæ­¥
npm run build:csr
```

æ„å»ºè¾“å‡ºä½äº [dist/](dist/) ç›®å½•ã€‚

### ä»£ç æ£€æŸ¥

```bash
# æ£€æŸ¥ä»£ç 
npm run lint

# è‡ªåŠ¨ä¿®å¤
npm run lint:fix
```

---

## é¡¹ç›®ç»Ÿè®¡

- **é¡µé¢æ€»æ•°**: 49 ä¸ª
- **é€šç”¨ç»„ä»¶**: 16 ä¸ª
- **ä¸šåŠ¡ç»„ä»¶**: 10 ä¸ª
- **çŠ¶æ€ç®¡ç†**: 12 ä¸ª Store
- **å·¥å…·å‡½æ•°**: 16 ä¸ªæ¨¡å—
- **æšä¸¾å®šä¹‰**: 13 ä¸ªæ–‡ä»¶
- **å›½é™…åŒ–è¯­è¨€**: 7 ç§è¯­è¨€
- **æ”¯æŒä¸»é¢˜**: 20+ ä¸»é¢˜
- **åŸç”Ÿå¹³å°**: iOS + Android

---